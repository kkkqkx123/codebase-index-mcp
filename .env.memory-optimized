# 内存优化配置
NODE_ENV = development
PORT = 3000

# 内存相关配置 - 降低内存使用
MEMORY_THRESHOLD = 95
BATCH_MEMORY_THRESHOLD = 95
MAX_MEMORY_MB = 1024
MEMORY_WARNING_THRESHOLD = 95
MEMORY_CRITICAL_THRESHOLD = 98
MEMORY_EMERGENCY_THRESHOLD = 99
NODE_OPTIONS="--max-old-space-size=1024"

# 降低批处理大小以减少内存使用
INDEX_BATCH_SIZE = 25
CHUNK_SIZE = 500
OVERLAP_SIZE = 100
MAX_FILE_SIZE = 5242880  # 5MB

# 数据库配置
QDRANT_HOST = 127.0.0.1
QDRANT_PORT = 6333
QDRANT_COLLECTION = code-snippets

# 嵌入配置
EMBEDDING_PROVIDER = siliconflow
SILICONFLOW_API_KEY = your-siliconflow-api-key-here
SILICONFLOW_BASE_URL = https://api.siliconflow.cn/v1
SILICONFLOW_MODEL = BAAI/bge-m3
SILICONFLOW_DIMENSIONS = 1024

# 日志配置
LOG_LEVEL = info
LOG_FORMAT = json

# 监控配置
ENABLE_METRICS = true
METRICS_PORT = 9090


# Redis Configuration
REDIS_ENABLED = true
REDIS_URL = redis://localhost:6379
REDIS_MAXMEMORY = 128mb
REDIS_USE_MULTI_LEVEL = true
REDIS_TTL_EMBEDDING = 86400
REDIS_TTL_SEARCH = 3600
REDIS_TTL_GRAPH = 1800
REDIS_TTL_PROGRESS = 300
REDIS_RETRY_ATTEMPTS = 3
REDIS_RETRY_DELAY = 1000
REDIS_POOL_MIN = 1
REDIS_POOL_MAX = 5

# Static Analysis Configuration
SEMGREP_ENABLED = true
SEMGREP_CLI_PATH = semgrep
SEMGREP_RULES_DIR = ./config/semgrep-rules
SEMGREP_ENHANCED_RULES_PATH = ./config/enhanced-rules
SEMGREP_TIMEOUT = 300
SEMGREP_MAX_TARGET_BYTES = 1000000
SEMGREP_MAX_CONCURRENT_SCANS = 5
SEMGREP_CACHE_ENABLED = true
SEMGREP_CACHE_TTL = 3600
SEMGREP_SCAN_ON_CHANGE = true
SEMGREP_RESULT_RETENTION_DAYS = 30