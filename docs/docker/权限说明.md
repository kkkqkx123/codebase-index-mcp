## 文件权限设置的设计理念

### 1. **安全性优先的分层权限模型**

```bash
# 配置文件权限设置为644
chmod 644 *.yml *.yaml *.conf *.json
```
- **6** (所有者权限): 读+写 (rw-)
- **4** (组权限): 只读 (r--)
- **4** (其他用户权限): 只读 (r--)

**原因**:
- 配置文件只需要被服务读取，不需要执行
- 防止意外修改：只有所有者可以修改，降低误操作风险
- 服务运行时通常以特定用户身份运行，需要读取权限

### 2. **目录权限的755设置**

```bash
# 目录权限设置为755
chmod 755 monitoring/ nebula/ qdrant/
```

**原因**:
- **7** (所有者): 读+写+执行 (rwx) - 需要进入目录和修改内容
- **5** (组和其他): 读+执行 (r-x) - 允许服务进入目录读取文件
- 执行权限对目录意味着"可以进入该目录"

### 3. **数据目录的特殊处理**

```bash
# 数据存储目录设置为755
chmod -R 755 nebula/data/* qdrant/storage/
```

**原因**:
- 容器需要写入数据，所以设置组和其他用户有执行权限
- 防止过于宽松的权限导致安全隐患
- 递归设置确保子目录继承正确的权限

### 4. **最小权限原则**

整个权限设置遵循**最小权限原则**:
- 不给不必要的写权限
- 不给不必要的执行权限
- 服务需要什么权限就给什么权限

### 5. **容器运行环境考虑**

- **Docker容器**通常以非root用户运行
- **WSL环境**可能有不同的用户映射
- **跨平台兼容性**: 644/755在Linux和WSL中都是安全的默认值

### 6. **实际运行需求**

| 服务类型 | 需要的权限 | 实际设置 |
|---------|-----------|----------|
| Prometheus配置读取 | 只读 | 644 |
| Grafana仪表板 | 只读 | 644 |
| Nebula数据写入 | 读写 | 755目录+644文件 |
| Docker卷挂载 | 进入权限 | 755 |

这种权限设置既保证了服务的正常运行，又最大程度地降低了安全风险。
